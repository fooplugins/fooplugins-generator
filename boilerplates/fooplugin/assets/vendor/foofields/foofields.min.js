"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){t.config={opt:{small:960,on:{},fields:{}},cls:{small:"foofields-small",hoverable:"foofields-hoverable",active:"foofields-active",first:"foofields-first",last:"foofields-last",hidden:"foofields-hidden",selected:"foofields-selected",container:{el:"foofields-container",content:{el:"foofields-content",field:"foofields-field"},tabs:{el:"foofields-tabs",exists:"foofields-has-tabs",tab:{el:"foofields-tab",link:"foofields-tab-link",icon:"foofields-tab-icon",text:"foofields-tab-text",menu:{el:"foofields-tab-menu",exists:"foofields-has-menu",visible:"foofields-show-menu",showing:"foofields-menu-showing",header:"foofields-tab-menu-header",item:{el:"foofields-tab-menu-item",link:"foofields-tab-menu-link",text:"foofields-tab-menu-text"}}}}},fields:{}},i18n:{fields:{}}},t.$=e}(jQuery,window.FooFields=window.FooFields||{}),function(e){if(e){var t={$:e,version:"0.1.9",versionCompare:function(e,t){if(!/[\d.]/.test(e)||!/[\d.]/.test(t))return NaN;function n(e){for(var t=e.split("."),n=[],i=0,s=t.length;i<s;i++)n[i]=parseInt(t[i]),isNaN(n[i])&&(n[i]=0);return n}for(var i=n(e),s=n(t);i.length<s.length;)i.push(0);for(;s.length<i.length;)s.push(0);for(var o=0;o<i.length;++o){if(s.length===o)return 1;if(i[o]!==s[o])return i[o]>s[o]?1:-1}return i.length!==s.length?-1:0}};!function(){try{return!!window.FooFields.utils}catch(e){return!1}}()?window.FooFields.utils=t:0<t.versionCompare(t.version,window.FooFields.utils.version)?(console.warn("An older version of FooFields.utils ("+window.FooFields.utils.version+") already exists in the page, version "+t.version+" will override it."),window.FooFields.utils=t):console.warn("A newer version of FooFields.utils ("+window.FooFields.utils.version+") already exists in the page, version "+t.version+" will not register itself.")}else console.warn("jQuery must be included in the page prior to the FooFields.utils library.")}(jQuery),function(t,n){"0.1.9"===n.version&&(n.is={},n.is.array=function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.is.boolean=function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},n.is.element=function(e){return"object"===("undefined"==typeof HTMLElement?"undefined":_typeof(HTMLElement))?e instanceof HTMLElement:!!e&&"object"===_typeof(e)&&1===e.nodeType&&"string"==typeof e.nodeName},n.is.empty=function(e){if(n.is.undef(e)||null===e)return!0;if(n.is.number(e)&&0===e)return!0;if(n.is.boolean(e)&&!1===e)return!0;if(n.is.string(e)&&0===e.length)return!0;if(n.is.array(e)&&0===e.length)return!0;if(n.is.jq(e)&&0===e.length)return!0;if(n.is.hash(e)){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}return!1},n.is.error=function(e){return"[object Error]"===Object.prototype.toString.call(e)},n.is.fn=function(e){return e===window.alert||"[object Function]"===Object.prototype.toString.call(e)},n.is.hash=function(e){return n.is.object(e)&&e.constructor===Object&&!e.nodeType&&!e.setInterval},n.is.jq=function(e){return!n.is.undef(t)&&e instanceof t},n.is.number=function(e){return"[object Number]"===Object.prototype.toString.call(e)&&!isNaN(e)},n.is.object=function(e){return"[object Object]"===Object.prototype.toString.call(e)&&!n.is.undef(e)&&null!==e},n.is.promise=function(e){return n.is.object(e)&&n.is.fn(e.then)&&n.is.fn(e.promise)},n.is.size=function(e){return!!(n.is.string(e)&&!n.is.empty(e)||n.is.number(e))&&/^(auto|none|(?:[\d.]*)+?(?:%|px|mm|q|cm|in|pt|pc|em|ex|ch|rem|vh|vw|vmin|vmax)?)$/.test(e)},n.is.string=function(e){return"[object String]"===Object.prototype.toString.call(e)},n.is.undef=function(e){return void 0===e})}(FooFields.utils.$,FooFields.utils),function(f,d,h){if("0.1.9"===d.version){d.fn={};var l=Function.prototype.toString;d.fn.CONTAINS_SUPER=/xyz/.test(l.call(function(){xyz}))?/\b_super\b/:/.*/,d.fn.addOrOverride=function(e,t,n){if(h.object(e)&&h.string(t)&&!h.empty(t)&&h.fn(n)){var i,s,o=e[t],r=h.fn(o)&&d.fn.CONTAINS_SUPER.test(l.call(n));e[t]=r?(i=o,s=n,function(){var e=this._super;this._super=i;var t=s.apply(this,arguments);return this._super=e,t}):n}},d.fn.apply=function(e,t){function n(){return e.apply(this,t)}return t=h.array(t)?t:[],n.prototype=e.prototype,new n},d.fn.arg2arr=function(e){return Array.prototype.slice.call(e)},d.fn.debounce=function(n,i){var s;return function(){var e=this,t=d.fn.arg2arr(arguments);clearTimeout(s),s=setTimeout(function(){n.apply(e,t)},i)}},d.fn.throttle=function(n,i){var s,o;return function(){var e=this,t=d.fn.arg2arr(arguments);s?(clearTimeout(o),o=setTimeout(function(){Date.now()-s>=i&&(n.apply(e,t),s=Date.now())},i-(Date.now()-s))):(n.apply(e,t),s=Date.now())}},d.fn.check=function(t,e,n,i){function s(e){return function(){return e.apply(t,arguments)}}return n=h.fn(n)?n:f.noop,t=h.object(t)?t:window,e=h.string(e)?d.fn.fetch(e,i):e,h.fn(e)?s(e):s(n)},d.fn.fetch=function(e,n){return!h.string(e)||h.empty(e)?null:(n=h.object(n)?n:window,f.each(e.split("."),function(e,t){if(!n[t])return!1;n=n[t]}),h.fn(n)?n:null)},d.fn.enqueue=function(e,n,t,i){var s=d.fn.arg2arr(arguments),o=f.Deferred(),r=f.Deferred(),l=r.promise(),a=[],u=[],c=!0;return e=s.shift(),n=s.shift(),f.each(e,function(e,t){h.fn(t[n])&&(l=l.then(function(){if(!c){var e=d.fn.arg2arr(arguments);a.push(e)}return c=!1,function(e,t){try{return u.push(e),t.apply(e,s)}catch(e){return o.reject(e,u),o}}(t,t[n])}))}),l.then(function(){if(!c){var e=d.fn.arg2arr(arguments);a.push(e)}c=!1,o.resolve(a)}),l.fail(function(){var e=d.fn.arg2arr(arguments);e.push(u),o.reject.apply(o,e)}),r.resolve(),o.promise()},d.fn.when=function(e){if(!h.array(e)||h.empty(e))return f.when();for(var t=f.Deferred(),n=[],i=e.length,s=0;s<e.length;s++)e[s].then(function(e){n.push(e)}).always(function(){--i||t.resolve(n)});return t.promise()},d.fn.rejectWith=function(e,t){var n=f.Deferred(),i=d.fn.arg2arr(arguments);return n.reject.apply(n,i).promise()},d.fn.resolveWith=function(e,t){var n=f.Deferred(),i=d.fn.arg2arr(arguments);return n.resolve.apply(n,i).promise()},d.fn.resolved=f.Deferred().resolve().promise(),d.fn.rejected=f.Deferred().reject().promise()}}(FooFields.utils.$,FooFields.utils,FooFields.utils.is),function(e,r){if("0.1.9"===e.version){e.url={};var o=document.createElement("a");e.url.parts=function(e){o.href=e;var t=o.port?o.port:-1!==["http:","https:"].indexOf(o.protocol)?"https:"===o.protocol?"443":"80":"",n=o.hostname+(t?":"+t:""),i=o.origin?o.origin:o.protocol+"//"+n,s="/"===o.pathname.slice(0,1)?o.pathname:"/"+o.pathname;return{hash:o.hash,host:n,hostname:o.hostname,href:o.href,origin:i,pathname:s,port:t,protocol:o.protocol,search:o.search}},e.url.full=function(e){return!r.string(e)||r.empty(e)?null:(o.href=e,o.href)},e.url.param=function(e,t,n){return r.string(e)&&r.string(t)&&!r.empty(t)?r.undef(n)?(s=((i=new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)")).exec(e)||["",""])[1].replace(/\+/g,"%20"),r.string(s)&&!r.empty(s)?decodeURIComponent(s):null):(r.empty(n)?(i=new RegExp("^([^#]*?)(([^#]*)&)?"+t+"(=[^&#]*)?(&|#|$)"),s=e.replace(i,"$1$3$5").replace(/^([^#]*)((\?)&|\?(#|$))/,"$1$3$4")):(i=new RegExp("([?&])"+t+"[^&]*"),o=t+"="+encodeURIComponent(n),(s=e.replace(i,"$1"+o))!==e||i.test(s)||(s+=(-1!==s.indexOf("?")?"&":"?")+o)),s):e;var i,s,o}}}(FooFields.utils,FooFields.utils.is),function(l,a,u){"0.1.9"===l.version&&(l.str={},l.str.camel=function(e){return a.empty(e)?e:e.toUpperCase()===e?e.toLowerCase():e.replace(/^([A-Z])|[-\s_]+(\w)/g,function(e,t,n){return a.string(n)?n.toUpperCase():t.toLowerCase()})},l.str.kebab=function(e){return a.empty(e)?e:e.match(/[A-Z]{2,}(?=[A-Z][a-z0-9]*|\b)|[A-Z]?[a-z0-9]*|[A-Z]|[0-9]+/g).filter(Boolean).map(function(e){return e.toLowerCase()}).join("-")},l.str.contains=function(e,t,n){return!(!a.string(e)||a.empty(e)||!a.string(t)||a.empty(t))&&(t.length<=e.length&&-1!==(n?e.toUpperCase().indexOf(t.toUpperCase()):e.indexOf(t)))},l.str.containsWord=function(e,t,n){if(!a.string(e)||a.empty(e)||!a.string(t)||a.empty(t)||e.length<t.length)return!1;for(var i=e.split(/\W/),s=0,o=i.length;s<o;s++)if(n?i[s].toUpperCase()===t.toUpperCase():i[s]===t)return!0;return!1},l.str.endsWith=function(e,t){return!a.string(e)||a.empty(e)||!a.string(t)||a.empty(t)?e===t:e.slice(e.length-t.length)===t},l.str.escapeRegExp=function(e){return a.empty(e)?e:e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},l.str.fnv1a=function(e){if(!a.string(e)||a.empty(e))return null;var t,n,i=2166136261;for(t=0,n=e.length;t<n;t++)i^=e.charCodeAt(t),i+=(i<<1)+(i<<4)+(i<<7)+(i<<8)+(i<<24);return i>>>0},l.str.from=function(e,t){return!a.string(e)||a.empty(e)||!a.string(t)||a.empty(t)?null:l.str.contains(e,t)?e.substring(e.indexOf(t)+t.length):null},l.str.join=function(e,t,n){if(!a.string(e)||!a.string(t))return null;var i=u.arg2arr(arguments);e=i.shift();var s,o,r=i.shift();for(s=0,o=i.length;s<o;s++)t=i[s],a.empty(t)||(l.str.endsWith(r,e)&&(r=r.slice(0,r.length-e.length)),l.str.startsWith(t,e)&&(t=t.slice(e.length)),r+=e+t);return r},l.str.startsWith=function(e,t){return!a.empty(e)&&!a.empty(t)&&e.slice(0,t.length)===t},l.str.until=function(e,t){return a.empty(e)||a.empty(t)?e:l.str.contains(e,t)?e.substring(0,e.indexOf(t)):e},l.str.format=function(e,t,n){var i=u.arg2arr(arguments);if(e=i.shift(),a.empty(e)||a.empty(i))return e;for(var s in 1===i.length&&(a.array(i[0])||a.object(i[0]))&&(i=i[0]),i)e=e.replace(new RegExp("\\{"+s+"\\}","gi"),i[s]);return e})}(FooFields.utils,FooFields.utils.is,FooFields.utils.fn),function(l,a,u,s,o){if("0.1.9"===a.version){a.obj={};var n=function(){};a.obj.create=function(e){if(!u.object(e))throw TypeError("Argument must be an object");n.prototype=e;var t=new n;return n.prototype=null,t},a.obj.extend=function(n,e,t){n=u.object(n)?n:{};var i=s.arg2arr(arguments);return i.shift(),l.each(i,function(e,t){a.obj.merge(n,t)}),n},a.obj.merge=function(e,t){for(var n in e=u.hash(e)?e:{},t=u.hash(t)?t:{})t.hasOwnProperty(n)&&(u.hash(t[n])?(e[n]=u.hash(e[n])?e[n]:{},a.obj.merge(e[n],t[n])):u.array(t[n])?e[n]=t[n].slice():e[n]=t[n]);return e},a.obj.mergeValid=function(n,i,s,e){if(!u.hash(s)||!u.hash(i))return n;var o,t,r;for(o in i=u.hash(i)?i:{},e=u.hash(e)?e:{},i)i.hasOwnProperty(o)&&u.fn(i[o])&&(t=u.array(e[o])?e[o]:u.string(e[o])?[e[o]]:[o],l.each(t,function(e,t){if(r=a.obj.prop(s,t),!u.undef(r))return i[o](r)?(a.obj.prop(n,o,r),!1):void 0}));return n},a.obj.prop=function(n,e,i){var t,s;if(u.object(n)&&!u.empty(e))return u.undef(i)?(o.contains(e,".")?(t=e.split("."),s=t.length-1,l.each(t,function(e,t){if(e===s)i=n[t];else{if(!u.hash(n[t]))return!1;n=n[t]}})):u.undef(n[e])||(i=n[e]),i):void(o.contains(e,".")?(t=e.split("."),s=t.length-1,l.each(t,function(e,t){e===s?n[t]=i:n=u.hash(n[t])?n[t]:n[t]={}})):u.undef(n[e])||(n[e]=i))}}}(FooFields.utils.$,FooFields.utils,FooFields.utils.is,FooFields.utils.fn,FooFields.utils.str),function(c,s,f){if("0.1.9"===s.version){s.ready=function(e){function t(){try{e.call(window,s.$)}catch(e){console.error(e)}}(Function("/*@cc_on return true@*/")()?"complete"===document.readyState:"loading"!==document.readyState)?t():document.addEventListener("DOMContentLoaded",t,!1)};var i=0;s.uniqueId=function(e,t){var n=e.attr("id");return f.empty(n)&&(n=(t=f.string(t)&&!f.empty(t)?t:"uid-")+ ++i,e.attr("id",n).data("__uniqueId__",!0)),n},s.removeUniqueId=function(e){e.data("__uniqueId__")&&e.removeAttr("id").removeData("__uniqueId__")},s.selectify=function(e){if(f.empty(e))return null;if(f.hash(e)){var t,n={};for(var i in e)e.hasOwnProperty(i)&&(t=s.selectify(e[i]))&&(n[i]=t);return n}return f.string(e)||f.array(e)?(f.string(e)&&(e=[e]),e.map(function(e){return f.string(e)?"."+e.split(/\s/g).join("."):null}).join(",")):null},s.src=function(e,t,n,i,s,o,r){if(!f.string(e))return null;if(!f.string(t))return e;var l=t.replace(/(\s[\d.]+[whx]),/g,"$1 @,@ ").split(" @,@ ").map(function(e){return{url:/^\s*(\S*)/.exec(e)[1],w:parseFloat((/\S\s+(\d+)w/.exec(e)||[0,1/0])[1]),h:parseFloat((/\S\s+(\d+)h/.exec(e)||[0,1/0])[1]),x:parseFloat((/\S\s+([\d.]+)x/.exec(e)||[0,1])[1])}});if(!l.length)return e;l.unshift({url:e,w:l[0].w!==1/0&&l[0].h===1/0?n:1/0,h:l[0].h!==1/0&&l[0].w===1/0?i:1/0,x:1});var a=f.number(r)?r:window.devicePixelRatio||1,u={w:s*a,h:o*a,x:a},c=["w","h","x"];return c.forEach(function(t){var n=Math.max.apply(null,l.map(function(e){return e[t]}));l=l.filter(function(e){return e[t]>=u[t]||e[t]===n})}),c.forEach(function(t){var n=Math.min.apply(null,l.map(function(e){return e[t]}));l=l.filter(function(e){return e[t]===n})}),l[0].url},s.scrollParent=function(e,o,t){e=f.jq(e)?e:c(e),o=f.string(o)&&/^(x|y|xy|yx)$/i.test(o)?o:"xy";var n=c(!!e.length&&e[0].ownerDocument||document);if(t=f.jq(t)?t:n,!e.length)return t;var i=e.css("position"),r="absolute"===i,l=/(auto|scroll)/i,a=/x/i,u=/y/i,s=e.parentsUntil(t).filter(function(e,t){var n=c(this);if(r&&"static"===n.css("position"))return!1;var i=u.test(o)&&t.scrollHeight>t.clientHeight&&l.test(n.css("overflow-y")),s=a.test(o)&&t.scrollWidth>t.clientWidth&&l.test(n.css("overflow-x"));return i||s}).eq(0);return s.is("html")&&(s=n),"fixed"!==i&&s.length?s:t}}}(FooFields.utils.$,FooFields.utils,FooFields.utils.is),function(a,u,c){if("0.1.9"===u.version){u.animation={},u.animation.requestFrame=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1)}).bind(window),u.animation.cancelFrame=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window);var e,t,n=document.createElement("div");u.animation.supported=(e=n.style,c.string(e.animation)||c.string(e.WebkitAnimation)||c.string(e.MozAnimation)||c.string(e.msAnimation)||c.string(e.OAnimation)),u.animation.end=(t=n.style,c.string(t.animation)?"animationend":c.string(t.WebkitAnimation)?"webkitAnimationEnd":c.string(t.MozAnimation)?"animationend":c.string(t.msAnimation)?"msAnimationEnd":c.string(t.OAnimation)?"oAnimationEnd":null),u.animation.duration=function(e,t){if(t=c.number(t)?t:0,!c.jq(e))return t;var n=e.css("animation-duration");if(/^([\d.]*)+?(ms|s)$/i.test(n)){var i=n.match(/^([\d.]*)+?(ms|s)$/i),s=parseFloat(i[1]);return"s"===i[2].toLowerCase()&&(s*=1e3),s}return t},u.animation.iterations=function(e,t){if(t=c.number(t)?t:1,!c.jq(e))return t;var n=e.css("animation-iteration-count");return/^(\d+|infinite)$/i.test(n)?"infinite"===n?1/0:parseInt(n):t},u.animation.start=function(t,e,n,i){var s=a.Deferred(),o=s.promise();if(t=t.first(),u.animation.supported){t.prop("offsetTop");var r=t.data("animation_safety");if(c.hash(r)&&c.number(r.timer)&&(clearTimeout(r.timer),t.removeData("animation_safety").off(u.animation.end+".utils"),r.deferred.reject()),!c.number(i)){var l=u.animation.iterations(t);if(l===1/0)return s.reject("No timeout supplied with an infinite animation."),o;i=u.animation.duration(t)*l+50}r={deferred:s,timer:setTimeout(function(){t.removeData("animation_safety").off(u.animation.end+".utils"),s.resolve()},i)},t.data("animation_safety",r),t.on(u.animation.end+".utils",function(e){t.is(e.target)&&(clearTimeout(r.timer),t.removeData("animation_safety").off(u.animation.end+".utils"),s.resolve())})}return u.animation.requestFrame(function(){c.fn(e)?e.apply(t.get(0),[t]):t.toggleClass(e,n),u.animation.supported||s.resolve()}),o}}}(FooFields.utils.$,FooFields.utils,FooFields.utils.is),function(l,a,u,c){if("0.1.9"===a.version){a.transition={};var e,t,n=document.createElement("div");a.transition.supported=(e=n.style,u.string(e.transition)||u.string(e.WebkitTransition)||u.string(e.MozTransition)||u.string(e.msTransition)||u.string(e.OTransition)),a.transition.end=(t=n.style,u.string(t.transition)?"transitionend":u.string(t.WebkitTransition)?"webkitTransitionEnd":u.string(t.MozTransition)?"transitionend":u.string(t.msTransition)?"msTransitionEnd":u.string(t.OTransition)?"oTransitionEnd":null),a.transition.duration=function(e,t){if(t=u.number(t)?t:0,!u.jq(e))return t;var n=e.css("transition-duration");if(/^([\d.]*)+?(ms|s)$/i.test(n)){var i=n.match(/^([\d.]*)+?(ms|s)$/i),s=parseFloat(i[1]);return"s"===i[2].toLowerCase()&&(s*=1e3),s}return t},a.transition.start=function(t,e,n,i){var s=l.Deferred(),o=s.promise();if(t=t.first(),a.transition.supported){t.prop("offsetTop");var r=t.data("transition_safety");u.hash(r)&&u.number(r.timer)&&(clearTimeout(r.timer),t.removeData("transition_safety").off(a.transition.end+".utils"),r.deferred.reject()),i=u.number(i)?i:a.transition.duration(t)+50,r={deferred:s,timer:setTimeout(function(){t.removeData("transition_safety").off(a.transition.end+".utils"),s.resolve()},i)},t.data("transition_safety",r),t.on(a.transition.end+".utils",function(e){t.is(e.target)&&(clearTimeout(r.timer),t.removeData("transition_safety").off(a.transition.end+".utils"),s.resolve())})}return c.requestFrame(function(){u.fn(e)?e.apply(t.get(0),[t]):t.toggleClass(e,n),a.transition.supported||s.resolve()}),o}}}(FooFields.utils.$,FooFields.utils,FooFields.utils.is,FooFields.utils.animation),function(e,s,o,r,l){"0.1.9"===s.version&&(s.Class=function(){},s.Class.extend=function(e){e=o.hash(e)?e:{};var t=r.create(this.prototype);for(var n in e)e.hasOwnProperty(n)&&l.addOrOverride(t,n,e[n]);function i(){if(!o.fn(this.construct))throw new SyntaxError('FooFields.utils.Class objects must be constructed with the "new" keyword.');this.construct.apply(this,arguments)}return t.construct=o.fn(t.construct)?t.construct:function(){},(i.prototype=t).constructor=o.fn(t.__ctor__)?t.__ctor__:i,i.extend=s.Class.extend,i.override=s.Class.override,i.bases=s.Class.bases,i.__base__=this,i},s.Class.override=function(e,t){l.addOrOverride(this.prototype,e,t)},s.Class.__base__=null,s.Class.bases=function(){return function e(t,n){return o.array(n)||(n=[]),o.fn(t)&&null!==t.__base__?(n.unshift(t.__base__),e(t.__base__,n)):n}(this,[])})}(FooFields.utils.$,FooFields.utils,FooFields.utils.is,FooFields.utils.obj,FooFields.utils.fn),function(o,l,a){"0.1.9"===o.version&&(o.Event=o.Class.extend({construct:function(e){if(l.empty(e))throw new SyntaxError("FooFields.utils.Event objects must be supplied a `type`.");var t=a.contains(e,".");this.type=t?a.until(e,"."):e,this.namespace=t?a.from(e,"."):null,this.defaultPrevented=!1,this.target=null},preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented}}),o.EventClass=o.Class.extend({construct:function(){this.__handlers={}},destroy:function(){this.__handlers={}},on:function(n,t,i){var s=this;return l.object(n)?(i=l.undef(t)?this:t,Object.keys(n).forEach(function(t){t.split(" ").forEach(function(e){s.__on(e,n[t],i)})})):l.string(n)&&l.fn(t)&&(i=l.undef(i)?this:i,n.split(" ").forEach(function(e){s.__on(e,t,i)})),s},__on:function(e,t,n){var i=a.contains(e,"."),s=i?a.until(e,"."):e,o=i?a.from(e,"."):null;l.array(this.__handlers[s])||(this.__handlers[s]=[]),this.__handlers[s].some(function(e){return e.namespace===o&&e.fn===t&&e.thisArg===n})||this.__handlers[s].push({namespace:o,fn:t,thisArg:n})},off:function(n,t,i){var s=this;return l.object(n)?(i=l.undef(t)?this:t,Object.keys(n).forEach(function(t){t.split(" ").forEach(function(e){s.__off(e,l.fn(n[t])?n[t]:null,i)})})):l.string(n)&&(t=l.fn(t)?t:null,i=l.undef(i)?this:i,n.split(" ").forEach(function(e){s.__off(e,t,i)})),s},__off:function(e,t,n){var i=this,s=a.until(e,".")||null,o=a.from(e,".")||null,r=[];l.empty(s)?l.empty(o)||r.push.apply(r,Object.keys(i.__handlers)):r.push(s),r.forEach(function(e){l.array(i.__handlers[e])&&(i.__handlers[e]=i.__handlers[e].filter(function(e){return null!=t?!(e.namespace===o&&e.fn===t&&e.thisArg===n):null!=o&&e.namespace!==o}),0===i.__handlers[e].length&&delete i.__handlers[e])})},trigger:function(e,n){n=l.array(n)?n:[];var i=this,s=[];return e instanceof o.Event?(s.push(e),i.__trigger(e,n)):l.string(e)&&e.split(" ").forEach(function(e){var t=s.push(new o.Event(e))-1;i.__trigger(s[t],n)}),l.empty(s)?null:1===s.length?s[0]:s},__trigger:function(t,n){t.target=this,l.array(this.__handlers[t.type])&&this.__handlers[t.type].forEach(function(e){null!=t.namespace&&e.namespace!==t.namespace||e.fn.apply(e.thisArg,[t].concat(n))})}}))}(FooFields.utils,FooFields.utils.is,FooFields.utils.str),function(i,s,o){var n;"0.1.9"===s.version&&(s.Bounds=s.Class.extend({construct:function(){var e=this;e.top=0,e.right=0,e.bottom=0,e.left=0,e.width=0,e.height=0},inflate:function(e){var t=this;return o.number(e)&&(t.top-=e,t.right+=e,t.bottom+=e,t.left-=e,t.width+=2*e,t.height+=2*e),t},intersects:function(e){return this.left<=e.right&&e.left<=this.right&&this.top<=e.bottom&&e.top<=this.bottom}}),s.getViewportBounds=function(e){n||(n=i(window));var t=new s.Bounds;return t.top=n.scrollTop(),t.left=n.scrollLeft(),t.width=n.width(),t.height=n.height(),t.right=t.left+t.width,t.bottom=t.top+t.height,t.inflate(e),t},s.getElementBounds=function(e){o.jq(e)||(e=i(e));var t=new s.Bounds;if(0!==e.length){var n=e.offset();t.top=n.top,t.left=n.left,t.width=e.width(),t.height=e.height()}return t.right=t.left+t.width,t.bottom=t.top+t.height,t})}(FooFields.utils.$,FooFields.utils,FooFields.utils.is),function(e,t,i,n,s){"0.1.9"===t.version&&(t.Timer=t.EventClass.extend({construct:function(e){this._super(),this.interval=i.number(e)?e:1e3,this.isRunning=!1,this.isPaused=!1,this.canResume=!1,this.canRestart=!1,this.__timeout=null,this.__decrement=!1,this.__time=0,this.__remaining=0,this.__current=0,this.__finish=0,this.__restart=[]},__reset:function(){clearTimeout(this.__timeout),this.__timeout=null,this.__decrement=!1,this.__time=0,this.__remaining=0,this.__current=0,this.__finish=0,this.isRunning=!1,this.isPaused=!1,this.canResume=!1},__eventArgs:function(e){return[this.__current,this.__time,this.__decrement].concat(n.arg2arr(arguments))},__tick:function(){var e=this;e.trigger("tick",e.__eventArgs()),e.__current===e.__finish?(e.trigger("complete",e.__eventArgs()),e.__reset()):(e.__decrement?e.__current--:e.__current++,e.__remaining--,e.canResume=0<e.__remaining,e.__timeout=setTimeout(function(){e.__tick()},e.interval))},start:function(e,t){var n=this;n.isRunning||(t=!!i.boolean(t)&&t,n.__restart=[e,t],n.__decrement=t,n.__time=e,n.__remaining=e,n.__current=t?e:0,n.__finish=t?0:e,n.canRestart=!0,n.isRunning=!0,n.isPaused=!1,n.trigger("start",n.__eventArgs()),n.__tick())},countdown:function(e){this.start(e,!0)},countup:function(e){this.start(e,!1)},restart:function(){this.stop(),this.canRestart&&this.start.apply(this,this.__restart)},stop:function(){(this.isRunning||this.isPaused)&&(this.__reset(),this.trigger("stop",this.__eventArgs()))},pause:function(){var e=this;return null!=e.__timeout&&(clearTimeout(e.__timeout),e.__timeout=null),e.isRunning&&(e.isRunning=!1,e.isPaused=!0,e.trigger("pause",e.__eventArgs())),e.__remaining},resume:function(){var e=this;e.canResume&&(e.isRunning=!0,e.isPaused=!1,e.trigger("resume",e.__eventArgs()),e.__tick())},reset:function(){this.__reset(),this.trigger("reset",this.__eventArgs())}}))}(FooFields.utils.$,FooFields.utils,FooFields.utils.is,FooFields.utils.fn,FooFields.utils.obj),function(c,e,f,d){"0.1.9"===e.version&&(e.Factory=e.Class.extend({construct:function(){this.registered={}},contains:function(e){return!f.undef(this.registered[e])},load:function(e,t,n){var i,s,o=this,r=d.arg2arr(arguments),l=[],a=[];for(i in e=r.shift()||{},o.registered)if(o.registered.hasOwnProperty(i)){var u=o.registered[i];e.hasOwnProperty(i)&&(s=e[i],f.string(s)&&(s=d.fetch(e[i])),f.fn(s)&&(u={name:i,klass:s,priority:o.registered[i].priority})),l.push(u)}for(i in e)e.hasOwnProperty(i)&&!o.registered.hasOwnProperty(i)&&(s=e[i],f.string(s)&&(s=d.fetch(e[i])),f.fn(s)&&l.push({name:i,klass:s,priority:0}));return l.sort(function(e,t){return t.priority-e.priority}),c.each(l,function(e,t){f.fn(t.klass)&&a.push(d.apply(t.klass,r))}),a},make:function(e,t,n){var i,s=d.arg2arr(arguments);return e=s.shift(),i=this.registered[e],f.hash(i)&&f.fn(i.klass)?d.apply(i.klass,s):null},names:function(e){e=!!f.boolean(e)&&e;var t,n=[];if(e){var i=[];for(t in this.registered)this.registered.hasOwnProperty(t)&&i.push(this.registered[t]);i.sort(function(e,t){return t.priority-e.priority}),c.each(i,function(e,t){n.push(t.name)})}else for(t in this.registered)this.registered.hasOwnProperty(t)&&n.push(t);return n},register:function(e,t,n){if(!f.string(e)||f.empty(e)||!f.fn(t))return!1;n=f.number(n)?n:0;var i=this.registered[e];return this.registered[e]={name:e,klass:t,priority:f.undef(i)?n:i.priority},!0}}))}(FooFields.utils.$,FooFields.utils,FooFields.utils.is,FooFields.utils.fn),function(e,s,o){if("0.1.9"===e.version){var t=!1;try{t=!!window.localStorage}catch(e){t=!1}e.Debugger=e.Class.extend({construct:function(e){this.key=e,this.enabled=!!t&&!!localStorage.getItem(this.key)},enable:function(){t&&(this.enabled=!0,localStorage.setItem(this.key,this.enabled))},disable:function(){t&&(this.enabled=!1,localStorage.removeItem(this.key))},log:function(e,t){this.enabled&&console.log.apply(console,s.arg2arr(arguments))},logf:function(e,t,n){if(this.enabled){var i=s.arg2arr(arguments);e=i.shift(),t=i.shift(),i.unshift(o.format(e,t)),this.log.apply(this,i)}}})}}(FooFields.utils,FooFields.utils.fn,FooFields.utils.str),function(o,e,n){"0.1.9"===e.version&&(e.FullscreenAPI=e.EventClass.extend({construct:function(){this._super(),this.apis={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},webkit:{enabled:"webkitFullscreenEnabled",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},moz:{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}}},this.api=this.getAPI(),this.supported=null!=this.api,this.__listen()},destroy:function(){return this.__stopListening(),this._super()},getAPI:function(){for(var e in this.apis)if(this.apis.hasOwnProperty(e)&&this.apis[e].enabled in document)return this.apis[e];return null},element:function(){return this.supported?document[this.api.element]:null},request:function(e){if(this.supported&&e[this.api.request]){var t=e[this.api.request]();return t||o.Deferred(this.__resolver(this.api.request)).promise()}return n.rejected},exit:function(){if(this.supported&&this.element()){var e=document[this.api.exit]();return e||o.Deferred(this.__resolver(this.api.exit)).promise()}return n.rejected},toggle:function(e){return this.element()?this.exit():this.request(e)},__listen:function(){var e=this;e.supported&&o(document).on(e.api.events.change+".utils",function(){e.trigger("change")}).on(e.api.events.error+".utils",function(){e.trigger("error")})},__stopListening:function(){this.supported&&o(document).off(this.api.events.change+".utils").off(this.api.events.error+".utils")},__resolver:function(i){var s=this;return function(e){function t(){e.resolve(),o(document).off(s.api.events.change,t).off(s.api.events.error,n)}function n(){e.reject(new TypeError),o(document).off(s.api.events.change,t).off(s.api.events.error,n)}i===s.api.exit&&s.element()?setTimeout(function(){e.reject(new TypeError)},1):o(document).on(s.api.events.change,t).on(s.api.events.error,n)}}}),e.fullscreen=new e.FullscreenAPI)}(FooFields.utils.$,FooFields.utils,FooFields.utils.fn),function(e,t,n,o,i,s){n.find=function(e,t,n){if(o.array(e)&&o.fn(t))for(var i=0,s=e.length;i<s;i++)if(t.call(n,e[i],i,e))return e[i]},n.strip=function(e,t,n){return o.string(e)&&(o.string(t)&&!o.empty(t)&&i.startsWith(e,t)&&(e=i.from(e,t)),o.string(n)&&!o.empty(n)&&i.endsWith(e,n)&&(e=i.until(e,n))),e},n.expose=function(t,n,e){o.object(t)&&o.object(n)&&o.array(e)&&e.forEach(function(e){o.string(e)&&o.fn(t[e])&&(n[e]=t[e].bind(t))})}}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.str,FooFields.utils.obj),function(t,s,i,o,r){s.Instance=i.EventClass.extend({construct:function(){var e=this;e._super(),e.opt=r.extend({},s.config.opt),e.cls=r.extend({},s.config.cls),e.i18n=r.extend({},s.config.i18n),e.sel=i.selectify(e.cls),e.$doc=null,e.mqlSmall=null,e.small=!1,e.mqlHoverable=null,e.hoverable=!1,e.containers=[],e.onMqlSmallChanged=e.onMqlSmallChanged.bind(e),e.onMqlHoverableChanged=e.onMqlHoverableChanged.bind(e)},init:function(e){var n=this;o.hash(e)&&(r.extend(n.opt,e.opt),r.extend(n.i18n,e.i18n),o.hash(e.cls)&&(r.extend(n.cls,e.cls),n.sel=i.selectify(n.cls))),o.empty(n.opt.on)||n.on(n.opt.on,n),n.$doc=t(document),n.mqlSmall=window.matchMedia("(max-width: "+n.opt.small+"px)"),n.mqlHoverable=window.matchMedia("(hover: hover)"),n.small=n.mqlSmall.matches,n.hoverable=n.mqlHoverable.matches,n.containers=t(n.sel.container.el).map(function(e,t){return new s.Container(n,t)}).get(),n.trigger("init",[n]),n.containers.forEach(function(e){e.init()}),n.mqlSmall.addListener(n.onMqlSmallChanged),n.mqlHoverable.addListener(n.onMqlHoverableChanged),n.trigger("ready",[n])},destroy:function(){var e=this;e.trigger("destroy",[e]),e.mqlSmall.removeListener(e.onMqlSmallChanged),e.mqlHoverable.removeListener(e.onMqlHoverableChanged),e.containers.forEach(function(e){e.destroy()}),o.empty(e.opt.on)||e.off(e.opt.on,e),e._super()},field:function(e){for(var t,n=0,i=this.containers.length;n<i;n++)if(t=this.containers[n].field(e),t instanceof s.Field)return t},content:function(e){for(var t,n=0,i=this.containers.length;n<i;n++)if(t=this.containers[n].content(e),t instanceof s.Content)return t},container:function(t){if(o.string(t))return t=i.strip(t,"#"),i.find(this.containers,function(e){return e.id===t})},onMqlSmallChanged:function(e){this.trigger("small-changed",[this,this.small=e.matches])},onMqlHoverableChanged:function(e){this.trigger("hoverable-changed",[this,this.hoverable=e.matches])}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(o,n,e,r,l){n.Component=e.EventClass.extend({construct:function(e,t,n,i){var s=this;s._super(),s.instance=e,s.$el=r.jq(t)?t:o(t),s.cls=n,s.sel=i},init:function(){},destroy:function(){this._super()}}),n.CtnrComponent=n.Component.extend({construct:function(e,t,n,i,s){var o=this;o._super(e,n,i,s),o.ctnr=t,o.opt=l.extend({showWhen:{field:null,value:null,operator:null}},o.$el.data()),o.visible=!o.$el.hasClass(o.instance.cls.hidden),o._showWhenField=null},init:function(){this.setupVisibilityRules()},destroy:function(){this.teardownVisibilityRules(),this._super()},toggle:function(e){var t=this;t.visible=r.boolean(e)?e:!t.visible,t.$el.toggleClass(t.instance.cls.hidden,!t.visible)},setupVisibilityRules:function(){var e=this;if(e.toggle(e.visible),null!==e.opt.showWhen.field){var t=e.instance.field(e.opt.showWhen.field);t instanceof n.Field&&(e._showWhenField=t,e._showWhenField.on("change",e.onShowWhenFieldChanged,e))}},teardownVisibilityRules:function(){this._showWhenField instanceof n.Field&&this._showWhenField.off("change",this.onShowWhenFieldChanged,this)},checkVisibilityRules:function(e){var t,n=this.opt.showWhen.value;switch(this.opt.showWhen.operator){case"!==":t=e!==n;break;case"regex":t=new RegExp(n).test(e);break;case"indexOf":t=-1!==e.indexOf(n);break;default:t=e===n}return t},onShowWhenFieldChanged:function(e,t){this.toggle(this.checkVisibilityRules(t))}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(e,s,i,o,t){s.Container=s.Component.extend({construct:function(e,t){var n=this;n._super(e,t,e.cls.container,e.sel.container),n.id=n.$el.attr("id"),n.$state=n.$el.children('input[type="hidden"][name*="__state"]'),n.$tabContainer=n.$el.children(n.sel.tabs.el),n.$tabs=n.$tabContainer.children(n.sel.tabs.tab.el),n.contents=n.$el.children(n.sel.content.el).map(function(e,t){return new s.Content(n,t)}).get(),n.tabs=n.$tabs.map(function(e,t){return new s.Tab(n,t,e)}).get()},init:function(){var e=this,t=null;e.$el.toggleClass(e.cls.tabs.exists,0<e.tabs.length),e.setSmall(e.instance.small),e.setHoverable(e.instance.hoverable),e.contents.forEach(function(e){e.init(),null===t&&e.active&&(t=e)}),e.tabs.forEach(function(e){e.init()});var n=e.$state.val();o.empty(n)||(t=e.content(n)),!t&&0<e.contents.length&&(t=e.contents[0]),t instanceof s.Content&&e.activate(t.id),e.instance.on({"small-changed":e.onSmallChanged,"hoverable-changed":e.onHoverableChanged},e)},destroy:function(){var e=this;e.instance.off({"small-changed":e.onSmallChanged,"hoverable-changed":e.onHoverableChanged},e),e.$el.removeClass(e.cls.tabs.exists),e.tabs.forEach(function(e){e.destroy()}),e.contents.forEach(function(e){e.destroy()})},activate:function(t){var n=this;n.tabs.forEach(function(e){e.activate(t)}),n.contents.forEach(function(e){e.activate(t),e.id===t&&n.$state.val(t)})},toggle:function(t,n){o.string(t)&&(t=i.strip(t,"#"),this.tabs.forEach(function(e){e.target===t&&e.toggle(n)}),this.contents.forEach(function(e){e.id===t&&e.toggle(n)}))},field:function(e){for(var t,n=0,i=this.contents.length;n<i;n++)if(t=this.contents[n].field(e),t instanceof s.Field)return t},content:function(t){if(o.string(t))return t=i.strip(t,"#"),i.find(this.contents,function(e){return e.id===t})},setSmall:function(e){this.$el.toggleClass(this.instance.cls.small,!!e)},setHoverable:function(e){this.$el.toggleClass(this.instance.cls.hoverable,!!e)},onSmallChanged:function(e,t,n){this.setSmall(n)},onHoverableChanged:function(e,t,n){this.setHoverable(n)}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(e,s,o,t,r){s.Tab=s.CtnrComponent.extend({construct:function(e,t,n){var i=this;i._super(e.instance,e,t,e.cls.tabs.tab,e.sel.tabs.tab),i.index=n,i.opt=r.extend({showWhen:{field:null,value:null,operator:null}},i.$el.data()),i.$link=i.$el.children(i.sel.link).first(),i.$icon=i.$link.children(i.sel.icon).first(),i.$text=i.$link.children(i.sel.text).first(),i.target=o.strip(i.$link.attr("href"),"#"),i.active=i.$el.hasClass(i.instance.cls.active),i.menu=new s.TabMenu(i,i.$el.children(i.sel.menu.el))},init:function(){var e=this;e.$el.toggleClass(e.instance.cls.first,0===e.index).toggleClass(e.instance.cls.last,e.index===e.ctnr.tabs.length-1),e.$link.on("click.foofields",{self:e},e.onLinkClick),e._super(),e.menu.init()},destroy:function(){var e=this;e.$el.removeClass(e.instance.cls.first).removeClass(e.instance.cls.last),e.$link.off(".foofields"),e._super(),e.menu.destroy()},handles:function(e){return this.target===e||this.menu.handles(e)},activate:function(e){var t=this;t.$el.toggleClass(t.instance.cls.active,t.active=t.handles(e)),t.menu.exists&&t.menu.activate(e)},onLinkClick:function(e){e.preventDefault(),e.stopPropagation();var t=e.data.self;t.menu.exists&&t.instance.small&&!t.instance.hoverable?t.menu.toggle():t.ctnr.activate(t.target)},onShowWhenFieldChanged:function(e,t){this.ctnr.toggle(this.target,this.checkVisibilityRules(t))}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(i,s,e,n){s.TabMenu=s.CtnrComponent.extend({construct:function(e,t){var n=this;n._super(e.instance,e.ctnr,t,e.cls.menu,e.sel.menu),n.tab=e,n.$header=i("<li/>",{class:n.cls.header}).append(e.$text.clone()),n.items=n.$el.children(n.sel.item.el).map(function(e,t){return new s.TabMenuItem(n,t,e)}).get(),n.exists=0<n.items.length,n.visible=e.$el.hasClass(n.cls.visible),n._enter=null,n._leave=null,n.onDocumentClick=n.onDocumentClick.bind(n),n.onTabMouseEnter=n.onTabMouseEnter.bind(n),n.onTabMouseLeave=n.onTabMouseLeave.bind(n)},init:function(){var e=this;e.exists&&(e.tab.$el.addClass(e.cls.exists),e.items.forEach(function(e){e.init()}),e.setSmall(e.instance.small),e.setHoverable(e.instance.hoverable),e.instance.on({"small-changed":e.onSmallChanged,"hoverable-changed":e.onHoverableChanged},e))},destroy:function(){var e=this;e.exists&&(e.instance.off({"small-changed":e.onSmallChanged,"hoverable-changed":e.onHoverableChanged},e),e.toggle(!1),e.setSmall(!1),e.setHoverable(!1),e.tab.$el.removeClass(e.cls.exists),e.items.forEach(function(e){e.destroy()}))},toggle:function(e){var t=this;t.exists&&(t.visible=n.undef(e)?!t.visible:!!e,t.tab.$el.toggleClass(t.cls.visible,t.visible),t.ctnr.$tabContainer.toggleClass(t.cls.showing,0<t.ctnr.$tabs.filter(t.sel.visible).length),t.visible?t.instance.$doc.on("click.foofields",t.onDocumentClick):t.instance.$doc.off("click.foofields",t.onDocumentClick))},item:function(t){if(this.exists)return e.find(this.items,function(e){return e.target===t})},handles:function(e){return this.item(e)instanceof s.TabMenuItem},activate:function(t){this.exists&&this.items.forEach(function(e){e.activate(t)})},setSmall:function(e){e?this.$el.prepend(this.$header):this.$header.remove()},setHoverable:function(e){var t=this;e?t.tab.$el.on({"mouseenter.foofields":t.onTabMouseEnter,"mouseleave.foofields":t.onTabMouseLeave}):(t.tab.$el.off({"mouseenter.foofields":t.onTabMouseEnter,"mouseleave.foofields":t.onTabMouseLeave}),clearTimeout(t._enter),clearTimeout(t._leave),t._enter=null,t._leave=null)},onSmallChanged:function(e,t,n){this.setSmall(n)},onHoverableChanged:function(e,t,n){this.setHoverable(n)},onDocumentClick:function(){this.toggle(!1)},onTabMouseEnter:function(){var e=this;clearTimeout(e._leave),(e._leave=null)===e._enter&&(e._enter=setTimeout(function(){e.toggle(!0),e._enter=null},300))},onTabMouseLeave:function(){var e=this;clearTimeout(e._enter),(e._enter=null)===e._leave&&(e._leave=setTimeout(function(){e.toggle(!1),e._leave=null},300))}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is),function(e,t,s,n,o){t.TabMenuItem=t.CtnrComponent.extend({construct:function(e,t,n){var i=this;i._super(e.instance,e.ctnr,t,e.cls.item,e.sel.item),i.menu=e,i.index=n,i.opt=o.extend({showWhen:{field:null,value:null,operator:null}},i.$el.data()),i.active=i.$el.hasClass(i.instance.cls.active),i.$link=i.$el.children(i.sel.link).first(),i.$text=i.$link.children(i.sel.text).first(),i.target=s.strip(i.$link.attr("href"),"#")},init:function(){var e=this;e.$el.toggleClass(e.instance.cls.first,0===e.index).toggleClass(e.instance.cls.last,e.index===e.menu.items.length-1),e.$link.on("click.foofields",{self:e},e.onLinkClick),e._super()},destroy:function(){var e=this;e.$el.removeClass(e.instance.cls.first).removeClass(e.instance.cls.last),e.$link.off(".foofields"),e._super()},activate:function(e){this.$el.toggleClass(this.instance.cls.active,this.active=this.target===e)},onLinkClick:function(e){e.preventDefault(),e.stopPropagation();var t=e.data.self;t.ctnr.activate(t.target)},onShowWhenFieldChanged:function(e,t){this.ctnr.toggle(this.target,this.checkVisibilityRules(t))}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(e,i,n,t,s){i.Content=i.CtnrComponent.extend({construct:function(e,t){var n=this;n._super(e.instance,e,t,e.cls.content,e.sel.content),n.opt=s.extend({showWhen:{field:null,value:null,operator:null}},n.$el.data()),n.id=n.$el.attr("id"),n.active=n.$el.hasClass(n.instance.cls.active),n.fields=n.$el.children(n.sel.field).map(function(e,t){return i.fields.create(n,t)}).get()},init:function(){var e=this;e.$el.toggleClass(e.instance.cls.active,e.active),e._super(),e.fields.forEach(function(e){e.init()})},destroy:function(){this.fields.forEach(function(e){e.destroy()}),this._super()},activate:function(e){this.$el.toggleClass(this.instance.cls.active,this.active=this.id===e)},field:function(t){return n.find(this.fields,function(e){return e.id===t})},onShowWhenFieldChanged:function(e,t){this.ctnr.toggle(this.id,this.checkVisibilityRules(t))}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(o,e,t,d,h){e.Fields=t.Factory.extend({construct:function(){this.registered={}},register:function(e,t,n,i,s,o,r){if(!d.string(n))return!1;if(this._super(e,t,r)){var l=this.registered[e];return l.selector=n,l.options=d.hash(i)?i:{},l.classes=d.hash(s)?s:{},l.i18n=d.hash(o)?o:{},!0}return!1},make:function(e,t,n,i){var s=this.registered[e],o={},r={};if(d.hash(s)){var l=t.instance,a=this.bases(e),u=[{}],c=[{}],f=[{}];return a.push(this.registered[e]),a.push({options:l.opt.fields[e],classes:l.cls.fields[e],i18n:l.i18n.fields[e]}),a.forEach(function(e){u.push(e.options),c.push(e.classes),f.push(e.i18n)}),u.push(i),c.push(r),f.push(o),i=h.extend.apply(h,u),r=h.extend.apply(h,c),o=h.extend.apply(h,f),this._super(e,t,n,i,r,o)}return null},create:function(e,t,n){var i,s=this;for(i in t=d.jq(t)?t:o(t),n=h.extend({},n,t.data()),s.registered)if(s.registered.hasOwnProperty(i)&&"field"!==i&&t.is(s.registered[i].selector))return s.make(i,e,t,n);return s.make("field",e,t,n)},bases:function(e){if(!this.contains(e))return[];var n=this,t=n.registered[e].klass.bases(),i=[];return t.forEach(function(e){var t=n.find(e);null!==t&&i.push(t)}),i},find:function(e){var t,n=this.registered;for(t in n)if(n.hasOwnProperty(t)&&n[t].klass===e)return n[t];return null}}),e.fields=new e.Fields}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(n,e,r,i){e.Field=e.CtnrComponent.extend({construct:function(e,t,n,i,s){var o=this;o._super(e.instance,e.ctnr,t,i,r.selectify(i)),o.content=e,o.opt=n,o.i18n=s,o.id=o.$el.attr("id"),o.$label=o.$el.children(o.sel.label),o.$input=o.$el.children(o.sel.input),o.$change=o.$el.find(o.opt.changeSelector),o.$value=o.$el.find(o.opt.valueSelector)},init:function(){var e=this;e.setup(),e.$change.on("change.foofields",{self:e},e.onValueChanged),e._super(),e.trigger("init",[e])},setup:function(){},destroy:function(){var e=this;e.trigger("destroy",[e]),e.$change.off("change.foofields",e.onValueChanged),e.teardown(),e._super()},teardown:function(){},toggle:function(e){this._super(e),this.visible?this.enable():this.disable()},disable:function(){this.$el.find(":input").attr("disabled","disabled")},enable:function(){this.$el.find(":input").removeAttr("disabled")},val:function(){var t=this,e=t.$value;return i.string(t.opt.valueFilter)&&(e=e.filter(t.opt.valueFilter)),e.map(function(){var e=n(this);return null!==t.opt.valueAttribute?e.attr(t.opt.valueAttribute):e.val()}).get().join(",")},onValueChanged:function(e){var t=e.data.self;t.trigger("change",[t.val(),t])}}),e.fields.register("field",e.Field,".foofields-field",{showWhen:{field:null,value:null,operator:null},changeSelector:":input",valueSelector:":input",valueFilter:null,valueAttribute:null},{el:"foofields-field",label:"foofields-label",input:"foofields-field-input"},{})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is),function(i,e,t,n){e.AjaxButton=e.Field.extend({setup:function(){var n=this;n.$button=n.$input.find("a:first"),n.$spinner=n.$input.find(".spinner"),n.$message=n.$input.find(".response-message"),n.$button.click(function(e){e.preventDefault(),e.stopPropagation(),n.$message.hide(),n.$spinner.addClass("is-active");var t={action:"foofields_"+n.id,nonce:n.opt.nonce};i("#post_ID").length&&(t.postID=i("#post_ID").val()),i.ajax({url:window.ajaxurl,type:"POST",data:t,error:function(){n.$message.text("An unexpected error occurred!").addClass("error").show()},success:function(e){e&&(e.success?e.data.message&&n.$message.text(e.data.message).addClass("success").show():e.data.message&&n.$message.text(e.data.message).addClass("error").show())},complete:function(){n.$spinner.removeClass("is-active")}})})}}),e.fields.register("ajaxbutton",e.AjaxButton,".foofields-type-ajaxbutton",{},{},{})}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(e,t,n,i){e.fn.wpColorPicker?(t.ColorPicker=t.Field.extend({setup:function(){this.$input.children("input[type=text]").wpColorPicker()}}),t.fields.register("colorpicker",t.ColorPicker,".foofields-type-colorpicker",{},{},{})):console.log("FooFields.ColorPicker dependency missing.")}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(t,e,n,i){e.EmbedMetabox=e.Field.extend({setup:function(){var e=this;e.$container=e.$input.children("div").first(),e.$metabox=t("#"+e.$container.data("metabox")),e.$metabox.removeClass("closed"),e.$metabox.detach().appendTo(e.$container)}}),e.fields.register("embed-metabox",e.EmbedMetabox,".foofields-type-embed-metabox",{},{},{})}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(n,e,t,i){e.HtmlList=e.Field.extend({updateSelected:function(){var t=this;t.$change.each(function(){var e=n(this);e.parent("label").toggleClass(t.instance.cls.selected,e.is(t.opt.valueFilter))})},setup:function(){this.updateSelected()},onValueChanged:function(e){var t=e.data.self;t.updateSelected(),t.trigger("change",[t.val(),t])}}),e.fields.register("htmllist",e.HtmlList,".foofields-type-htmllist,.foofields-type-radiolist,.foofields-type-checkboxlist",{changeSelector:"[type='checkbox'],[type='radio']",valueSelector:"[type='checkbox'],[type='radio']",valueFilter:":checked"},{},{})}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(i,e,t,s){window.Selectize?(e.Selectize=e.Field.extend({setup:function(){var n=this;if(n.$select=n.$input.children("select").first(),n.$select.length){n.$display=n.$input.children("input[type=hidden]").first();var e=s.extend({},n.opt.selectize,{onChange:function(e){if(n.api instanceof window.Selectize){var t=n.api.getItem(e);n.$display.val(t.text())}},load:function(e,t){i.get(window.ajaxurl+"?"+n.opt.query,{q:e}).done(function(e){t(e.results)}).fail(function(){t()})}});n.api=n.$select.selectize(e).get(0).selectize}},teardown:function(){this.api instanceof Selectize&&this.api.destroy()},enable:function(){this.api instanceof Selectize&&this.api.enable()},disable:function(){this.api instanceof Selectize&&this.api.disable()}}),e.fields.register("selectize",e.Selectize,".foofields-type-selectize",{query:null,selectize:{valueField:"id",labelField:"text",searchField:"text",maxItems:1,create:!1,options:[]}},{},{})):console.log("FooFields.Selectize dependency missing.")}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(e,t,n,s){window.Selectize?(t.SelectizeMulti=t.Field.extend({setup:function(){var i=this;if(i.$select=i.$input.children("select").first(),i.create=!1,i.opt.create&&(i.create=function(e,t){this.close(),i.$input.children(".selectize-control").addClass("loading");var n={action:i.opt.action,nonce:i.opt.nonce,add:e};jQuery.ajax({url:window.ajaxurl,cache:!1,type:"POST",data:n,complete:function(){i.$input.children(".selectize-control").removeClass("loading")},success:function(e){void 0!==e.new?t({value:e.new.value,text:e.new.display}):t(!1)},error:function(){t(!1)}})}),i.$select.length){s.extend(i.opt,i.$select.data());var e=s.extend({},i.opt.selectize,{onChange:function(e){if(i.api instanceof window.Selectize)i.api.getItem(e)},create:i.create});i.api=i.$select.selectize(e).get(0).selectize}},teardown:function(){this.api instanceof Selectize&&this.api.destroy()},enable:function(){this.api instanceof Selectize&&this.api.enable()},disable:function(){this.api instanceof Selectize&&this.api.disable()}}),t.fields.register("selectize-multi",t.SelectizeMulti,".foofields-type-selectize-multi",{selectize:{plugins:["remove_button"],delimiter:", ",createOnBlur:!0,maxItems:null,closeAfterSelect:!0,items:null}},{},{})):console.log("FooFields.Selectize dependency missing.")}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(e,t,n,i){e.fn.suggest?(t.Suggest=t.Field.extend({setup:function(){var e=this;e.$suggest=e.$input.children("input[type=text]").first(),e.$suggest.suggest(window.ajaxurl+"?"+e.opt.query,{multiple:e.opt.mulitple,multipleSep:e.opt.separator})}}),t.fields.register("suggest",t.Suggest,".foofields-type-suggest",{},{},{})):console.log("FooFields.Suggest dependency missing.")}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(e,r,t,n){r.Repeater=r.Field.extend({construct:function(e,t,n,i,s){var o=this;o._super(e,t,n,i,s),o.$addButton=o.$input.children(o.sel.add),o.$table=o.$input.children("table").first(),o.$tbody=o.$table.children("tbody").first(),o.$template=o.$table.children("tfoot").first().children("tr").first(),o.rows=o.$tbody.children("tr").map(function(e,t){return new r.RepeaterRow(o,t)}).get()},init:function(){var s,o=this;o._super(),o.$addButton.on("click.foofields",{self:o},o.onAddNewClick),o.rows.forEach(function(e){e.init()}),o.$tbody.sortable({cancel:":input",forcePlaceholderSize:!0,placeholder:"foofields-repeater-placeholder",items:"> tr",distance:5,start:function(e,t){s=t.item.index(),t.placeholder.height(t.item.height())},update:function(e,t){var n=t.item.index(),i=s<n?s:n;console.log("update:",n),o.$tbody.children("tr").eq(i).nextAll("tr").andSelf().trigger("index-change")}})},destroy:function(){this.$tbody.sortable("destroy"),this.rows.forEach(function(e){e.destroy()}),this.$addButton.off(".foofields"),this._super()},addNewRow:function(){var e=this,t=new r.RepeaterRow(e,e.$template.clone());return e.rows.push(t),e.$tbody.append(t.$el).sortable("refresh"),t.init(!0),e.$el.removeClass(e.cls.empty),t},remove:function(e){var t=this,n=e.$el.nextAll("tr");e.$el.remove(),t.$tbody.sortable("refresh");var i=t.rows.indexOf(e);-1!==i&&t.rows.splice(i,1),0===t.$tbody.children("tr").length&&t.$el.addClass(t.cls.empty),n.trigger("index-change")},onAddNewClick:function(e){e.preventDefault(),e.stopPropagation(),e.data.self.addNewRow()},toggle:function(e){this._super(e),this.$template.find(":input").attr("disabled","disabled")}}),r.fields.register("repeater",r.Repeater,".foofields-type-repeater",{},{add:"foofields-repeater-add",empty:"foofields-empty"},{})}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(n,e,t,i){e.RepeaterDelete=e.Field.extend({setup:function(){var e=this;e.$button=e.$input.find(e.sel.button).on("click.foofields",{self:e},e.onClick)},teardown:function(){this.$button.off(".foofields")},onClick:function(e){e.preventDefault(),e.stopPropagation();var t=n(this).data("confirm");t&&confirm(t)&&e.data.self.content.remove()}}),e.fields.register("repeater-delete",e.RepeaterDelete,".foofields-type-repeater-delete",{},{button:"foofields-repeater-delete"},{})}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(e,t,n,i){t.RepeaterIndex=t.Field.extend({setup:function(){this.content.on("index-change",this.onIndexChange,this)},teardown:function(){this.content.off("index-change")},onIndexChange:function(e,t){this.$input.text(i.format(this.opt.format,{index:t,count:t+1}))}}),t.fields.register("repeater-index",t.RepeaterIndex,".foofields-type-repeater-index",{format:"{count}"},{},{})}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.str),function(r,i,e,l,t){i.RepeaterRow=i.Component.extend({construct:function(e,t){var n=this;n._super(e.instance,t,e.cls,e.sel),n.repeater=e,n.ctnr=e.ctnr,n.$cells=n.$el.children("td,th"),n.fields=n.$cells.children(n.sel.el).map(function(e,t){return i.fields.create(n,t)}).get(),n.regex={id:/(_)-?\d+(-.*?)?$/i,name:/(\[.*?]\[)-?\d+(]\[.*?])$/i}},init:function(e){var t=this;t._super(),t.$el.on("index-change.foofields",{self:t},t.onIndexChange),t.fields.forEach(function(e){e.init()}),e&&t.reindex()},destroy:function(){this.fields.forEach(function(e){e.destroy()}),this._super()},remove:function(){this.repeater.remove(this)},reindex:function(){var n=this,i=n.$el.index();n.fields.forEach(function(e){e.id=n.update(e.$el,i),e.$el.find("[id],[name]").each(function(e,t){n.update(t,i)})}),n.trigger("index-change",[i])},update:function(e,t){var n=(e=l.jq(e)?e:r(e)).prop("id");if(l.string(n)){var i=n.replace(this.regex.id,"$1"+t+"$2");i!==n&&(e.prop("id",i),n=i)}var s=e.prop("name");if(l.string(s)){var o=s.replace(this.regex.name,"$1"+t+"$2");o!==s&&e.prop("name",o)}return n},field:function(t){return e.find(this.fields,function(e){return e.id===t})},onIndexChange:function(e){e.data.self.reindex()},enable:function(){this.fields.forEach(function(e){e.enable()})}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(e,t,n,i,s){t.__instance__=new t.Instance,n.expose(t.__instance__,t,["on","off","trigger","init","destroy","field"]),n.ready(function(){t.__instance__.init(window.FOOFIELDS)})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj);